(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{10:function(e){e.exports=JSON.parse('{"Server_URL":"//localhost:8000","File_upload":{"numFiles":1,"sizeLimit":20000000}}')},61:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),s=a(5),c=a.n(s),r=a(6),i=a(7),o=a(9),d=a(8),u=a(11),h=(a(37),a(3)),j=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("header",{children:[Object(h.jsx)("div",{className:"navbar navbar-dark bg-dark shadow-sm",children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("span",{className:"navbar-brand d-flex align-items-center",children:Object(h.jsx)("strong",{children:"ShootstaTube"})}),Object(h.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"modal","data-target":"#uploadModal","aria-controls":"navbarHeader","aria-expanded":"false",children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",fill:"currentColor",className:"bi bi-plus-circle",viewBox:"0 0 16 16",children:[Object(h.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(h.jsx)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})]})})]})}),Object(h.jsx)(u.a,{})]})}}]),a}(n.Component),b=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(h.jsx)("footer",{className:"footer mt-auto py-3 bg-light",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("span",{className:"text-muted",children:"Copyright 2021 \xa9 All rights reserved"})})})}}]),a}(n.Component),m=a(17),p=a.n(m),f=a(27),v=a(14),O=a(30),x=a(15),g=a.n(x),y=a(10),N=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={title:"",selectedFile:null,loaded:0,data:null},e.changeTitleHandler=function(t){e.setState({title:t.target.value})},e.onChangeHandler=function(t){var a=t.target.files;e.maxSelectFile(t,a)&&e.checkMimeType(t,a)&&e.checkFileSize(t,a)&&e.setState({selectedFile:a})},e.onClickHandler=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validate();case 2:null!==e.state.data&&g.a.post(y.Server_URL+"/upload",e.state.data,{onUploadProgress:function(t){e.setState({loaded:t.loaded/t.total*100})}}).then((function(t){return u.b.success("Upload successful!"),setTimeout(function(){this.setState({data:null,title:"",selectedFile:null,loaded:0}),this.resetsFileInput(),(0,this.props.onUploaded)(),window.closeModal()}.bind(Object(v.a)(e)),2e3),!0}));case 3:case"end":return t.stop()}}),t)}))),e.validate=function(){var t=new FormData;if(""===e.state.title)return u.b.error("Please enter a title for the video."),!1;if(t.append("title",e.state.title),null===e.state.selectedFile)return u.b.error("Please select MP4 video for upload."),!1;for(var a=0;a<e.state.selectedFile.length;a++)t.append("file",e.state.selectedFile[a]);return e.setState({data:t},(function(){})),!0},e.maxSelectFile=function(e,t){if(t.length>y.File_upload.numFiles){var a="Only "+y.File_upload.numFiles+" file can be uploaded at a time";return e.target.value=null,u.b.warn(a),!1}return!0},e.checkMimeType=function(e,t){for(var a="",n=["video/mp4"],l=function(e){if(n.every((function(a){return t[e].type!==a})))return a="Unknown file type. Please upload only MP4 format.\n","break"},s=0;s<t.length;s++){if("break"===l(s))break}return""===a||(e.target.value=null,u.b.warn(a),!1)},e.checkFileSize=function(e,t){for(var a=y.File_upload.sizeLimit,n="",l=0;l<t.length;l++)t[l].size>a&&(n+=t[l].type+" is too large, please pick a smaller file\n");return""===n||(e.target.value=null,u.b.warn(n),!1)},e.resetsFileInput=function(t){var a=Math.random().toString(36);e.setState({theInputKey:a})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"modal fade",id:"uploadModal",role:"dialog","data-testid":"uploadModal","aria-labelledby":"uploadModalLabel","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsxs)("div",{className:"modal-header",children:[Object(h.jsx)("h5",{className:"modal-title",id:"uploadModalLabel",children:"Upload Video"}),Object(h.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(h.jsxs)("div",{className:"modal-body",children:[Object(h.jsxs)("form",{method:"post",action:"#",id:"#",children:[Object(h.jsx)("div",{className:"form-group mb-2",children:Object(h.jsx)("input",{type:"text",className:"form-control",id:"title","data-testid":"title",onChange:this.changeTitleHandler,placeholder:"Enter a title for this video"})}),Object(h.jsx)("div",{className:"form-group files",children:Object(h.jsx)("input",{type:"file",className:"form-control",multiple:!0,onChange:this.onChangeHandler},this.state.theInputKey||"")})]}),Object(h.jsx)("div",{className:"form-group mt-2",children:Object(h.jsxs)(O.a,{max:"100",color:"success",value:this.state.loaded,children:[Math.round(this.state.loaded,2),"%"]})})]}),Object(h.jsx)("div",{className:"modal-footer",children:Object(h.jsx)("button",{type:"button",className:"btn btn-success btn-block uploadBtn",onClick:this.onClickHandler,children:"Upload"})})]})})})}}]),a}(n.Component),w=a(18),k=a.n(w),F=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return k.a.locale("en"),Object(h.jsx)("div",{className:"col",children:Object(h.jsxs)("div",{className:"card shadow-sm",children:[Object(h.jsx)("a",{href:"".concat(y.Server_URL,"/").concat(this.props.filename),children:Object(h.jsx)("img",{className:"bd-placeholder-img card-img-top",width:"100%",height:"225",src:"".concat(y.Server_URL,"/").concat(this.props.image),preserveAspectRatio:"xMidYMid slice",focusable:"false",alt:this.props.title})}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("p",{className:"card-text",children:this.props.title}),Object(h.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:Object(h.jsx)("small",{className:"text-muted",children:k()(this.props.datetime).format("d MMM YYYY")})})]})]})})}}]),a}(n.Component),M=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={data:null},e.fetchResult=function(){g.a.get(y.Server_URL+"/readDB").then((function(t){t.data&&(e.setState({data:t.data}),console.log(t))}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchResult()}},{key:"render",value:function(){var e=this;return null===this.state.data?Object(h.jsxs)("main",{children:[Object(h.jsx)("div",{"data-testid":"videoList",className:"album py-5 bg-light",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("h4",{children:"There are no videos uploaded yet."})})}),Object(h.jsx)(N,{onUploaded:function(){return e.fetchResult()}})]}):Object(h.jsxs)("main",{children:[Object(h.jsx)("div",{"data-testid":"videoList",className:"album py-5 bg-light",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3",children:this.state.data.map((function(e){return Object(h.jsx)(F,{title:e.title,image:e.image,filename:e.filename,datetime:e.datetime},e.id)}))})})}),Object(h.jsx)(N,{onUploaded:function(){return e.fetchResult()}})]})}}]),a}(n.Component);a(61);var S=function(){return Object(h.jsxs)(l.a.Fragment,{children:[Object(h.jsx)(j,{}),Object(h.jsx)(M,{}),Object(h.jsx)(b,{})]})};a(62),a(63);c.a.render(Object(h.jsx)(S,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.946e3ceb.chunk.js.map